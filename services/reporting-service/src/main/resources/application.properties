# Tên của service này
spring.application.name=API_REPORTING_SERVICE
# Server port 
server.port=8088 
# Profile
spring.profiles.active=dev

app.services.dealer.url=http://localhost:8083
app.services.catalog.url=http://localhost:8087


# Database
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ------------------------------------------------------------------
# Kafka 
# ------------------------------------------------------------------
spring.kafka.bootstrap-servers=${SPRING_KAFKA_BOOTSTRAP_SERVERS}

# Producer (Không cần sửa)
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer

# Consumer (ĐÃ XÓA CÁC CẤU HÌNH DESERIALIZER VÀ TRUSTED.PACKAGES)
spring.kafka.consumer.group-id=reporting-service-group
spring.kafka.consumer.auto-offset-reset=earliest

# 1. Chỉ định Spring dùng JsonDeserializer
spring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer

# 2. (Quan trọng) Cho phép Deserializer tin tưởng các package chứa DTO của bạn
spring.kafka.consumer.properties.spring.json.trusted.packages=com.ev.common_lib.event

# 3. (Tùy chọn nhưng khuyến nghị) Báo cho Deserializer không dùng thông tin header
spring.kafka.consumer.properties.spring.json.use.type.headers=false

# 4. Chỉ định loại DTO mặc định nếu không có header (dùng Object để linh hoạt)
spring.kafka.consumer.properties.spring.json.value.default.type=java.lang.Object


# ------------------------------------------------------------------
# JPA/Hibernate Configuration
# ------------------------------------------------------------------
# Dùng 'update' để Hibernate tự động tạo bảng (inventory_summary_by_region)
spring.jpa.hibernate.ddl-auto=update
# Hiển thị câu lệnh SQL trong console
spring.jpa.show-sql=true 
# Dialect của H2
# spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
