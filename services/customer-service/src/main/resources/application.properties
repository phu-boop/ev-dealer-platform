# spring.config.import=optional:classpath:.env[.properties]

spring.application.name=${SPRING_APP_NAME}
server.port=${SERVER_PORT}

spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}

# Changed to 'none' temporarily to skip schema validation
# Database has VARBINARY for dealer_id, entity expects BINARY(16)
# This allows app to start while data types are compatible
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# External Service URLs
# User Service - để lấy thông tin nhân viên (đã tích hợp với User Service thực tế)
user.service.url=${USER_SERVICE_URI}

# Vehicle Service - để lấy thông tin xe
vehicle.service.url=${VEHICLE_SERVICE_URI}

# Notification Service - để gửi thông báo
notification.service.url=${NOTIFICATION_SERVICE_URI}

# ========================================
# TEST DRIVE APPOINTMENT SETTINGS
# ========================================

# Notification Settings
notification.enabled=${NOTIFICATION_ENABLED}

# Email Settings (SendGrid - optional, cần config nếu sử dụng)
# sendgrid.api.key=${SENDGRID_API_KEY:}
# sendgrid.from.email=${SENDGRID_FROM_EMAIL:noreply@evdealer.com}
# sendgrid.from.name=${SENDGRID_FROM_NAME:EV Dealer System}

# SMS Settings (Twilio - optional, cần config nếu sử dụng)
# twilio.account.sid=${TWILIO_ACCOUNT_SID:}
# twilio.auth.token=${TWILIO_AUTH_TOKEN:}
# twilio.phone.number=${TWILIO_PHONE_NUMBER:}

# Business Rules
testdrive.min.duration.minutes=15
testdrive.max.duration.minutes=240
testdrive.min.advance.hours=2
testdrive.business.hours.start=8
testdrive.business.hours.end=18

# Reminder Scheduler Settings
reminder.schedule.cron=0 0 10 * * *
reminder.hours.before=24

# Confirmation Scheduler Settings (check every hour)
confirmation.schedule.cron=0 0 * * * *

# Enable Spring Scheduling
spring.task.scheduling.enabled=true

# ========================================
# EMAIL CONFIRMATION SETTINGS
# ========================================

# Spring Mail Configuration (using Gmail SMTP as example)
spring.mail.host=${MAIL_HOST}
spring.mail.port=${MAIL_PORT}
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com

# Application URLs
app.base-url=${APP_BASE_URL}
app.frontend-url=${APP_FRONTEND_URL}

# Suppress static resource warnings
spring.web.resources.add-mappings=false
logging.level.org.springframework.web.servlet.resource.ResourceHttpRequestHandler=ERROR

